/* Палітра через CSS-переменные — можно мапить на твои SCSS-переменные в :root */
:root {
  --blue-soft: #8ebbd6;
  --blue-soft-600: #6fa2c0;
  --ink: #1f2a36; /* цвет букв */
}

.overlay {
  position: fixed;
  inset: 0;
  /* Слой 1: мягкая голубая подложка */
  background: radial-gradient(
      1200px 600px at 80% 10%,
      rgba(142, 187, 214, 0.25),
      transparent 60%
    ),
    radial-gradient(
      900px 500px at 10% 80%,
      rgba(111, 162, 192, 0.22),
      transparent 65%
    ),
    linear-gradient(180deg, #f6f9fb 0%, #eef5fa 100%);
  /* Слой 2: лёгкая виньетка поверх */
  box-shadow: inset 0 0 120px rgba(17, 30, 40, 0.08),
    inset 0 0 320px rgba(17, 30, 40, 0.05);

  display: grid;
  place-items: center;
  transition: opacity 0.45s ease, visibility 0.45s ease;
  opacity: 1;
  visibility: visible;
}

.leaving {
  opacity: 0;
  visibility: hidden;
}

.word {
  position: relative;
  font-family: var(
    --font-display,
    ui-sans-serif,
    system-ui,
    -apple-system,
    'Segoe UI',
    Roboto,
    'Helvetica Neue',
    Arial
  );
  font-weight: 700;
  font-size: clamp(28px, 6vw, 72px);
  letter-spacing: 0.06em;
  color: var(--ink);
  display: inline-flex;
  align-items: baseline;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.55),
    /* едва заметный верхний блик */ 0 10px 30px rgba(0, 0, 0, 0.08); /* мягкая объемная тень */

  /* Переменные таймингов */
  --step: 140ms;
  --last: 10;

  /* ШИММЕР — световая полоска, проходящая по буквам после появления */
  &::after {
    content: '';
    position: absolute;
    inset: -8% -12%;
    background: linear-gradient(
      120deg,
      rgba(255, 255, 255, 0) 0%,
      rgba(255, 255, 255, 0.75) 20%,
      rgba(255, 255, 255, 0) 40%
    );
    opacity: 0;
    pointer-events: none;
    mix-blend-mode: screen; /* безопасно для Safari */
    transform: translateX(-40%);
    animation: sheen 1100ms ease-out both;
    animation-delay: calc(var(--last) * var(--step) + 120ms);
  }

  /* ПРЕМИУМ-ПОДЧЕРКИВАНИЕ — тонкая линия, «вспыхивающая» под словом */
  &::before {
    content: '';
    position: absolute;
    left: 50%;
    bottom: -10px;
    width: min(56vw, 520px);
    height: 1px;
    transform: translateX(-50%) scaleX(0.1);
    transform-origin: center;
    background: linear-gradient(
      90deg,
      rgba(111, 162, 192, 0),
      rgba(111, 162, 192, 0.65),
      rgba(111, 162, 192, 0)
    );
    filter: drop-shadow(0 4px 10px rgba(111, 162, 192, 0.35));
    opacity: 0;
    animation: underlineIn 900ms cubic-bezier(0.2, 0.7, 0.2, 1) both;
    animation-delay: calc(var(--last) * var(--step) + 200ms);
  }
}

.char {
  --step: 140ms;
  display: inline-block;
  transform: translateX(24px);
  opacity: 0;
  filter: blur(6px);
  animation: reveal 700ms cubic-bezier(0.2, 0.7, 0.2, 1) forwards;
  animation-delay: calc(var(--i) * var(--step));
  margin-right: 0.02em;
}

.space {
  width: 0.65em;
  transform: none;
  filter: none;
  animation-name: fadeIn;
}

@keyframes reveal {
  0% {
    transform: translateX(24px);
    opacity: 0;
    filter: blur(6px);
  }
  60% {
    transform: translateX(-2px);
    filter: blur(0.5px);
    opacity: 1;
  }
  100% {
    transform: translateX(0);
    filter: blur(0);
    opacity: 1;
  }
}

@keyframes fadeIn {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}

@keyframes sheen {
  0% {
    opacity: 0;
    transform: translateX(-45%);
  }
  20% {
    opacity: 1;
  }
  100% {
    opacity: 0;
    transform: translateX(45%);
  }
}

@keyframes underlineIn {
  0% {
    opacity: 0;
    transform: translateX(-50%) scaleX(0.1);
  }
  30% {
    opacity: 1;
  }
  100% {
    opacity: 1;
    transform: translateX(-50%) scaleX(1);
  }
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .char {
    animation: none;
    transform: none;
    filter: none;
    opacity: 1;
  }
  .word::after,
  .word::before {
    animation: none;
    opacity: 1;
    transform: none;
  }
}
